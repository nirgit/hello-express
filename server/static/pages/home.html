<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Home - Powered by Express</title>
	<link rel="stylesheet" href="">
	<script src="jquery/dist/jquery.min.js"></script>
	<script src="react/dist/react-with-addons.min.js"></script>
</head>
<body>

	<h1>Hello Express!</h1>
	
	<p>
		<pre>Goat!</pre>
		<img src="/imgs/goat1.jpg" style="width:300px" />
	</p>

	<input id='tweet' type='text'/><button onclick='sendTweet()'>tweet!</button>
	<div id='tweetStatus'></div>

	<div id="app"></div>

	<script src="requirejs/require.js" data-main="/client/app.js"></script>

	<script>
		function tweetedSuccessfully(data) {
			if (data.status === 'OK') {
				$('#tweetStatus').text('tweeted successfully');
			} else {
				$('#tweetStatus').text('error tweeting');
			}
		}

		function sendTweet() {
			var tweet = $('#tweet').val();
			$('#tweet').val('');
			var tweetData = { "tweet": tweet };
			var call = $.ajax('/posts', {
				type: 'POST',
				data: tweetData,
				dataType: 'json',
				success: tweetedSuccessfully
			}).done(tweetedSuccessfully);
		}

	</script>
</body>
</html>